<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">


    <changeSet id="create_basic_table_and_constraint_and_insert" author="Vladimir-Panchenko">
        <sql>
            create table telemetry.telemetry_data (
            device_id bigint,
            id bigint generated by default as identity,
            last_updated timestamp(6) with time zone,
            module_id bigint,
            user_id bigint,
            data varchar(255),
            operation_type varchar(255) check (operation_type in ('DONE','FIXED','CANCELED')),
            primary key (id));

            INSERT INTO telemetry.telemetry_data
            (device_id, id, last_updated, module_id, user_id, "data", operation_type)
            VALUES(1, 1, '2024-09-17 22:49:30.782', 1, 1, NULL, 'DONE');

            INSERT INTO telemetry.telemetry_data
            (device_id, id, last_updated, module_id, user_id, "data", operation_type)
            VALUES(2, 2, '2024-09-17 22:49:30.782', 2, 2, NULL, 'CANCELED');
        </sql>

    </changeSet>
</databaseChangeLog>